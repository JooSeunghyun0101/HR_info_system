{/* 헤더 */ }
<div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '32px' }} className="fade-in">
    <div>
        <h1 style={{ fontSize: '28px', fontWeight: '600', color: '#FFB800', marginBottom: '4px', display: 'flex', alignItems: 'center', gap: '12px' }}>
            <MessageCircle style={{ width: '28px', height: '28px' }} />
            Q&A 데이터베이스
        </h1>
        <p style={{ fontSize: '14px', color: '#666' }}>
            {qnas.length}개의 질문
        </p>
    </div>
    <button
        className="gold-button"
        style={{ display: 'flex', alignItems: 'center', gap: '6px' }}
        onClick={() => {
            setIsEditing(false);
            setNewQnA({ question_title: '', question_details: '', answer: '', tags: '', categoryId: categories[0]?.id || '' });
            setIsModalOpen(true);
        }}
    >
        <Plus style={{ width: '16px', height: '16px' }} />
        질문 등록
    </button>
</div>

{/* 검색 바 */ }
<div style={{ marginBottom: '24px' }} className="fade-in-delay-1">
    <div style={{ position: 'relative', maxWidth: '500px' }}>
        <div style={{ position: 'absolute', left: '12px', top: '50%', transform: 'translateY(-50%)', pointerEvents: 'none' }}>
            <Search style={{ width: '16px', height: '16px', color: '#666' }} />
        </div>
        <input
            type="text"
            className="terminal-input"
            style={{ paddingLeft: '38px', height: '42px' }}
            placeholder="질문 검색..."
            value={searchInput}
            onChange={(e) => setSearchInput(e.target.value)}
            onKeyDown={(e) => {
                if (e.key === 'Enter') {
                    handleSearch();
                }
            }}
        />
    </div>
</div>

{/* 리스트 */ }
{
    loading ? (
        <div className="terminal-card" style={{ textAlign: 'center', padding: '60px 32px' }}>
            <p style={{ color: '#999', fontSize: '14px' }}>로딩 중...</p>
        </div>
    ) : (
        <div style={{ display: 'flex', flexDirection: 'column', gap: '16px' }} className="fade-in-delay-2">
            {qnas.length === 0 ? (
                <div className="terminal-card" style={{ textAlign: 'center', padding: '60px 32px' }}>
                    <MessageCircle style={{ width: '48px', height: '48px', color: '#333', margin: '0 auto 16px' }} />
                    <p style={{ color: '#999', fontSize: '14px' }}>등록된 질문이 없습니다</p>
                </div>
            ) : (
                qnas.map((qna) => (
                    <div
                        key={qna.id}
                        className="terminal-card"
                        style={{ cursor: 'pointer', padding: '24px' }}
                        onClick={() => setSelectedQnA(qna)}
                    >
                        <div style={{ position: 'relative', zIndex: 10 }}>
                            {/* 제목 & 카테고리 */}
                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', gap: '16px', marginBottom: '12px' }}>
                                <h3 style={{ fontSize: '18px', fontWeight: '600', color: '#FFB800', flex: 1 }}>
                                    {qna.question_title}
                                </h3>
                                <div style={{ display: 'flex', gap: '8px' }}>
                                    {qna.categories.map((cat) => (
                                        <span
                                            key={cat.category.name}
                                            style={{
                                                padding: '4px 12px',
                                                borderRadius: '4px',
                                                fontSize: '12px',
                                                backgroundColor: `${cat.category.color}15`,
                                                border: `1px solid ${cat.category.color}40`,
                                                color: cat.category.color,
                                            }}
                                        >
                                            {cat.category.name}
                                        </span>
                                    ))}
                                </div>
                            </div>

                            {/* 설명 */}
                            <p style={{ color: '#999', fontSize: '14px', marginBottom: '16px', lineHeight: '1.6' }}>
                                {qna.question_details}
                            </p>

                            {/* 메타 정보 */}
                            <div style={{ display: 'flex', alignItems: 'center', gap: '16px', fontSize: '12px', color: '#666' }}>
                                <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>
                                    <User style={{ width: '14px', height: '14px' }} />
                                    <span>{qna.created_by.full_name}</span>
                                </div>
                                <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>
                                    <Eye style={{ width: '14px', height: '14px' }} />
                                    <span>{qna.view_count} 조회</span>
                                </div>
                                <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>
                                    <Calendar style={{ width: '14px', height: '14px' }} />
                                    <span>{format(new Date(qna.created_at), 'yyyy-MM-dd')}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                ))
            )}
        </div>
    )
}
            </div >

    {/* Create/Edit Modal */ }
    < Modal isOpen = { isModalOpen } onClose = {() => { setIsModalOpen(false); setIsEditing(false); }} title = { isEditing? "질문 수정": "새 질문 등록" } >
        <form onSubmit={handleCreate} style={{ display: 'flex', flexDirection: 'column', gap: '20px' }}>
            <div>
                <label style={{ display: 'block', fontSize: '13px', color: '#999', marginBottom: '8px' }}>카테고리</label>
                <select
                    className="terminal-input"
                    style={{ width: '100%', height: '44px' }}
                    value={newQnA.categoryId}
                    onChange={(e) => setNewQnA({ ...newQnA, categoryId: e.target.value })}
                >
                    {categories.map(cat => (
                        <option key={cat.id} value={cat.id}>{cat.name}</option>
                    ))}
                </select>
            </div>
            <div>
                <label style={{ display: 'block', fontSize: '13px', color: '#999', marginBottom: '8px' }}>질문 제목</label>
                <input
                    type="text"
                    className="terminal-input"
                    style={{ width: '100%', height: '44px', paddingLeft: '12px' }}
                    placeholder="질문의 핵심 내용을 입력하세요"
                    required
                    value={newQnA.question_title}
                    onChange={(e) => setNewQnA({ ...newQnA, question_title: e.target.value })}
                />
            </div>
            <div>
                <label style={{ display: 'block', fontSize: '13px', color: '#999', marginBottom: '8px' }}>상세 내용</label>
                <textarea
                    className="terminal-input"
                    style={{ width: '100%', height: '120px', padding: '12px', resize: 'vertical' }}
                    placeholder="질문의 상세 내용을 입력하세요"
                    required
                    value={newQnA.question_details}
                    onChange={(e) => setNewQnA({ ...newQnA, question_details: e.target.value })}
                />
            </div>
            <div>
                <label style={{ display: 'block', fontSize: '13px', color: '#999', marginBottom: '8px' }}>답변 (선택사항)</label>
                <textarea
                    className="terminal-input"
                    style={{ width: '100%', height: '120px', padding: '12px', resize: 'vertical' }}
                    placeholder="이미 알고 있는 답변이 있다면 입력하세요"
                    value={newQnA.answer}
                    onChange={(e) => setNewQnA({ ...newQnA, answer: e.target.value })}
                />
            </div>
            <div>
                <label style={{ display: 'block', fontSize: '13px', color: '#999', marginBottom: '8px' }}>태그 (쉼표로 구분)</label>
                <input
                    type="text"
                    className="terminal-input"
                    style={{ width: '100%', height: '44px', paddingLeft: '12px' }}
                    placeholder="예: 인사, 휴가, 연차"
                    value={newQnA.tags}
                    onChange={(e) => setNewQnA({ ...newQnA, tags: e.target.value })}
                />
            </div>
            <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '12px', marginTop: '12px' }}>
                <button
                    type="button"
                    onClick={() => setIsModalOpen(false)}
                    style={{
                        padding: '0 20px',
                        height: '44px',
                        borderRadius: '6px',
                        backgroundColor: 'transparent',
                        border: '1px solid #333',
                        color: '#999',
                        cursor: 'pointer'
                    }}
                >
                    취소
                </button>
                <button type="submit" className="gold-button" style={{ height: '44px', padding: '0 24px' }}>
                    {isEditing ? '수정하기' : '등록하기'}
                </button>
            </div>
        </form>
            </Modal >

    {/* Detail Modal */ }
    < Modal isOpen = {!!selectedQnA} onClose = {() => setSelectedQnA(null)} title = "질문 상세" >
        { selectedQnA && (
            <div style={{ display: 'flex', flexDirection: 'column', gap: '24px' }}>
                <div>
                    <div style={{ display: 'flex', gap: '8px', marginBottom: '12px' }}>
                        {selectedQnA.categories.map((cat) => (
                            <span
                                key={cat.category.name}
                                style={{
                                    padding: '4px 12px',
                                    borderRadius: '4px',
                                    fontSize: '12px',
                                    backgroundColor: `${cat.category.color}15`,
                                    border: `1px solid ${cat.category.color}40`,
                                    color: cat.category.color,
                                }}
                            >
                                {cat.category.name}
                            </span>
                        ))}
                    </div>
                    <h2 style={{ fontSize: '24px', fontWeight: '600', color: '#FFB800', marginBottom: '8px' }}>
                        {selectedQnA.question_title}
                    </h2>
                    <div style={{ display: 'flex', alignItems: 'center', gap: '16px', fontSize: '13px', color: '#666' }}>
                        <span>작성자: {selectedQnA.created_by.full_name}</span>
                        <span>작성일: {format(new Date(selectedQnA.created_at), 'yyyy-MM-dd HH:mm')}</span>
                        <span>조회수: {selectedQnA.view_count}</span>
                    </div>
                </div>

                <div style={{ padding: '20px', backgroundColor: '#111', borderRadius: '8px', border: '1px solid #333' }}>
                    <h3 style={{ fontSize: '14px', color: '#999', marginBottom: '12px', textTransform: 'uppercase', letterSpacing: '0.5px' }}>질문 내용</h3>
                    <p style={{ lineHeight: '1.6', color: '#e5e5e5', whiteSpace: 'pre-wrap' }}>
                        {selectedQnA.question_details}
                    </p>
                </div>

                {/* 답변 섹션 */}
                {selectedQnA.answer && (
                    <div style={{ padding: '20px', backgroundColor: 'rgba(255, 184, 0, 0.05)', borderRadius: '8px', border: '1px solid rgba(255, 184, 0, 0.2)' }}>
                        <h3 style={{ fontSize: '14px', color: '#FFB800', marginBottom: '12px', textTransform: 'uppercase', letterSpacing: '0.5px' }}>답변</h3>
                        <p style={{ lineHeight: '1.6', color: '#e5e5e5', whiteSpace: 'pre-wrap' }}>
                            {selectedQnA.answer}
                        </p>
                    </div>
                )}

                {/* 태그 섹션 */}
                {selectedQnA.tags && selectedQnA.tags.length > 0 && (
                    <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>
                        {selectedQnA.tags.map((tagItem, index) => (
                            <span
                                key={index}
                                style={{
                                    fontSize: '12px',
                                    color: '#999',
                                    backgroundColor: '#222',
                                    padding: '4px 10px',
                                    borderRadius: '12px'
                                }}
                            >
                                #{tagItem.tag.name}
                            </span>
                        ))}
                    </div>
                )}

                <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '12px' }}>
                    {isAdmin && (
                        <>
                            <button
                                onClick={() => selectedQnA && handleDelete(selectedQnA.id)}
                                style={{
                                    padding: '0 24px',
                                    height: '44px',
                                    borderRadius: '6px',
                                    backgroundColor: '#331111',
                                    border: '1px solid #552222',
                                    color: '#ff4444',
                                    cursor: 'pointer'
                                }}
                            >
                                삭제
                            </button>
                            <button
                                onClick={openEditModal}
                                style={{
                                    padding: '0 24px',
                                    height: '44px',
                                    borderRadius: '6px',
                                    backgroundColor: '#112211',
                                    border: '1px solid #224422',
                                    color: '#44ff44',
                                    cursor: 'pointer'
                                }}
                            >
                                수정
                            </button>
                        </>
                    )}
                    <button
                        onClick={() => setSelectedQnA(null)}
                        className="gold-button"
                        style={{ padding: '0 24px', height: '44px' }}
                    >
                        닫기
                    </button>
                </div>
            </div>
        )}
            </Modal >

        </div >
    );
};

export default QnAList;
